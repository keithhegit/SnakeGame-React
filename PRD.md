# Snake Game PRD

## 1. 游戏概述
一个现代化的贪吃蛇游戏，具有多种难度模式、排行榜系统和现代化的UI设计。玩家通过控制蛇吃食物来获得分数，在有限时间内追求最高分。

## 2. 核心功能

### 2.1 游戏模式
提供三种难度模式，每种模式具有独特的游戏特点：

- **休闲模式 (Casual Mode)**
  - 游戏时间：35秒，适合快速游戏
  - 3条生命值，允许失误
  - 移动速度：4格/秒，便于控制
  - 撞墙判定：碰到墙壁损失一条生命
  - 适合：新手玩家，休闲娱乐

- **困难模式 (Hard Mode)**
  - 游戏时间：60秒，中等游戏时长
  - 1条生命值，无容错机会
  - 移动速度：6格/秒，需要较快反应
  - 撞墙判定：碰到墙壁直接游戏结束
  - 适合：有经验玩家，追求挑战

- **地狱模式 (Hell Mode)**
  - 游戏时间：90秒，较长游戏时长
  - 1条生命值，无容错机会
  - 移动速度：8格/秒，需要极快反应
  - 撞墙判定：碰到墙壁直接游戏结束
  - 食物消失机制：食物5秒后消失并重新生成
  - 适合：专业玩家，极限挑战

### 2.2 控制系统
提供多种控制方式，适应不同设备和用户习惯：

- **键盘控制**
  - 方向键或WASD：控制蛇的移动方向
  - ESC键：返回上一级菜单/暂停游戏
  - P键：快速暂停/继续游戏
  - Enter键：确认选择/提交名字

- **虚拟摇杆**
  - 位置：左下角固定显示
  - 显示效果：半透明背景，不影响游戏视觉
  - 操作反馈：按下方向时对应按键高亮
  - 触摸支持：支持手机/平板等触摸设备
  - 灵敏度：可及时响应方向变化

### 2.3 排行榜系统
记录和展示玩家成绩的完整系统：

- **记录规则**
  - 仅记录历史最佳成绩
  - 每个难度模式独立排行
  - 显示前10名最高分
  - 最低记录分数：50分
  - 记录内容：排名、玩家名、得分

- **排行榜功能**
  - 实时更新排名
  - 支持名字输入（最多10个字符）
  - 可查看不同难度的排行榜
  - 显示当前玩家最好成绩
  - 数据永久保存

### 2.4 界面设计
清晰直观的用户界面设计：

- **主界面**
  - 游戏标题：顶部居中显示
  - 难度选择：三个难度按钮垂直排列
  - 排行榜入口：右上角图标按钮
  - 返回按钮：右上角，用于退出游戏
  - 主题：简约现代风格

- **游戏界面**
  - 分数显示：左上角实时更新
  - 剩余时间：顶部居中倒计时
  - 生命值：右上角心形图标（休闲模式）
  - 虚拟摇杆：左下角半透明控制器
  - 暂停按钮：右上角可快速暂停
  - 返回按钮：右上角可退出当前游戏

- **排行榜界面**
  - 玩家排名：左侧序号1-10
  - 玩家名称：中间显示名字
  - 得分：右侧显示分数
  - 返回按钮：可返回主界面
  - 分类标签：显示当前难度分类

### 2.5 游戏机制
游戏核心玩法规则：

- **计分系统**
  - 基础分数：每个食物10分
  - 难度加成：
    - 休闲模式：1.0倍
    - 困难模式：1.5倍
    - 地狱模式：2.0倍
  - 连击奖励：
    - 3连击：1.5倍
    - 5连击：2.0倍
    - 7连击：2.5倍
    - 10连击：3.0倍

- **游戏结束条件**
  - 时间耗尽：倒计时结束
  - 生命值耗尽：全部生命用完
  - 撞墙：根据难度判定
  - 撞到自身：任何难度都会结束

## 3. 技术要求
- **开发环境**
  - Python 3.8+
  - Pygame 2.0+
  - 支持Windows/Mac/Linux

- **输入支持**
  - 键盘事件处理
  - 触摸事件识别
  - 手势操作支持

- **数据存储**
  - JSON格式存档
  - 本地数据持久化
  - 排行榜数据管理

## 4. 其他功能
- **名字输入系统**
  - 支持中英文输入
  - 最大长度限制
  - 实时输入预览
  - 支持退格修改

- **游戏开始倒计时**
  - 3秒倒计时动画
  - 清晰的数字显示
  - 动画效果提示

- **游戏暂停功能**
  - 随时暂停/继续
  - 暂停时显示菜单
  - 可选择返回或继续

- **返回主菜单功能**
  - 随时可返回
  - 保存当前游戏状态
  - 确认提示防误触 

## 5. 未来规划

### 5.1 本地双人模式

- **界面布局**
  - 屏幕垂直分割为上下两个区域
  - 各自独立的分数和状态显示
  - 共享的倒计时和游戏控制
  - 清晰的玩家区域边界

- **游戏机制**
  - 基础规则：
    - 两名玩家在各自区域内移动
    - 各自的食物独立生成
    - 相同的游戏时间限制
  - 互动机制：
    - 可发射障碍物到对方区域
    - 特殊食物可影响对方移动速度
    - 穿墙时可能出现在对方区域

- **控制方式**
  - 玩家1：WASD控制
  - 玩家2：方向键控制
  - 特殊技能：额外按键触发

- **胜利条件**
  - 时间模式：规定时间内得分高者胜
  - 生存模式：坚持时间更长者胜
  - 目标模式：先达到目标分数者胜

### 5.2 联机对战模式

- **基础架构**
  - WebSocket实时通信
  - 房间系统
  - 匹配机制
  - 延迟补偿

- **游戏模式**
  1. **竞速模式**
     - 限时5分钟
     - 相同的食物位置
     - 先达到目标分数获胜
     - 实时显示对手状态

  2. **生存模式**
     - 无时间限制
     - 死亡即失败
     - 可干扰对手
     - 特殊道具系统

  3. **领地模式**
     - 蛇的轨迹留下痕迹
     - 占领更多区域得分
     - 碰触对方轨迹失败
     - 战略性区域争夺

- **道具系统**
  - 速度类：
    - 加速自身（3秒）
    - 减速对手（2秒）
    - 瞬间移动（一次性）
  - 干扰类：
    - 反转对手控制（3秒）
    - 缩小对手视野（4秒）
    - 制造迷雾区域（5秒）
  - 特殊类：
    - 清除轨迹（一次性）
    - 无敌状态（2秒）
    - 穿墙能力（3秒）

- **排位系统**
  - 段位划分：
    - 青铜（0-1000分）
    - 白银（1001-2000分）
    - 黄金（2001-3000分）
    - 铂金（3001-4000分）
    - 钻石（4001-5000分）
    - 大师（5001分以上）
  - 赛季制：
    - 每月更新排位
    - 赛季结束奖励
    - 历史最高段位记录
  - 积分机制：
    - 胜负基础分：±25
    - 连胜额外奖励：+5/场
    - MVP表现加分：最多+10

- **社交功能**
  - 好友系统：
    - 好友列表
    - 在线状态
    - 快速邀请
  - 组队机制：
    - 双人组队
    - 战队系统
    - 组队语音
  - 观战功能：
    - 实时观战
    - 高分局回放
    - 精彩时刻录制
  - 排行榜：
    - 全球排行
    - 好友排行
    - 周榜/月榜

### 5.3 开发优先级

1. **本地双人模式（第一阶段）**
   - 基础分屏显示
   - 独立的游戏区域
   - 简单的计分系统
   - 基本的胜负判定

2. **本地双人模式（第二阶段）**
   - 互动机制实现
   - 道具系统开发
   - 多种胜利条件
   - 平衡性调整

3. **联机对战（第一阶段）**
   - 服务器架构搭建
   - 基础房间系统
   - 简单的匹配机制
   - 网络同步实现

4. **联机对战（第二阶段）**
   - 完整排位系统
   - 道具系统实现
   - 社交功能开发
   - 数据统计分析 

## 6. WebApp 技术方案

### 6.1 技术栈选择

- **前端框架**
  - React + TypeScript
    - 组件化开发
    - 类型安全
    - 良好的生态系统
  
- **游戏引擎**
  - Phaser 3
    - 专业的 HTML5 游戏引擎
    - 优秀的移动端性能
    - 内置物理引擎
    - 完善的精灵系统
    - WebGL 渲染支持

- **样式解决方案**
  - TailwindCSS
    - 原子化CSS
    - 响应式设计
    - 暗黑模式支持
  - Framer Motion
    - 流畅的动画效果
    - 手势交互支持

- **状态管理**
  - Zustand
    - 轻量级
    - 易于使用
    - 性能优秀

### 6.2 UI/UX 升级

- **视觉设计**
  - 扁平化现代风格
  - 渐变色主题
  - 动态背景效果
  - 粒子特效系统
  - 流畅的过渡动画

- **操作优化**
  - 虚拟摇杆优化
    - 自定义灵敏度
    - 可调节大小
    - 震动反馈
  - 手势控制
    - 滑动控制
    - 双指缩放
    - 多点触控支持

- **响应式设计**
  - 自适应布局
    - 手机竖屏优化
    - 平板横屏支持
    - 桌面端兼容
  - 动态UI缩放
  - 屏幕安全区适配

### 6.3 性能优化

- **资源加载**
  - 资源预加载
  - 懒加载策略
  - 资源压缩
  - 精灵图优化

- **渲染优化**
  - WebGL 渲染
  - 帧率控制
  - 内存管理
  - 缓存机制

- **网络优化**
  - Service Worker 缓存
  - PWA 支持
  - 断网重连机制
  - 数据压缩传输

### 6.4 新增特性

- **游戏画面**
  - 3D效果装饰
  - 粒子特效
  - 动态背景
  - 光影效果
  - 高清贴图

- **音效系统**
  - 背景音乐
  - 操作音效
  - 环境音效
  - 成就音效
  - 音量控制

- **成就系统**
  - 在线徽章
  - 解锁动画
  - 分享功能
  - 排行榜整合

### 6.5 部署方案

- **前端部署**
  - Vercel/Netlify
  - CDN 加速
  - HTTPS 支持
  - 自动化部署

- **后端服务**
  - Node.js + Express
  - WebSocket 服务
  - Redis 缓存
  - MongoDB 存储

- **监控系统**
  - 性能监控
  - 错误追踪
  - 用户行为分析
  - 数据统计 